{"ast":null,"code":"import React,{useRef,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Player(_ref){let{track}=_ref;const audioRef=useRef(null);const[segments,setSegments]=useState([]);const[start,setStart]=useState(0);const[end,setEnd]=useState(5);const[repeat,setRepeat]=useState(1);const addSegment=()=>{setSegments([...segments,{start,end,repeat}]);};const playSegments=async()=>{for(const seg of segments){for(let r=0;r<seg.repeat;r++){await playSegment(seg.start,seg.end);}}playSegments();// 🔁 loop whole sequence\n};const playSegment=(s,e)=>{return new Promise(resolve=>{const audio=audioRef.current;audio.currentTime=s;audio.play();const interval=setInterval(()=>{if(audio.currentTime>=e){audio.pause();clearInterval(interval);resolve();}},100);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-3 border rounded\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold\",children:track.name}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:track.url,controls:true,className:\"w-full mb-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:start,onChange:e=>setStart(Number(e.target.value)),placeholder:\"Start (sec)\",className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:end,onChange:e=>setEnd(Number(e.target.value)),placeholder:\"End (sec)\",className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:repeat,onChange:e=>setRepeat(Number(e.target.value)),placeholder:\"Repeat\",className:\"border px-2 py-1 rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addSegment,className:\"bg-green-500 text-white px-3 py-1 rounded\",children:\"Add\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:segments.map((seg,i)=>/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u25B6 \",seg.start,\"s \\u2192 \",seg.end,\"s \\xD7 \",seg.repeat]},i))}),/*#__PURE__*/_jsx(\"button\",{onClick:playSegments,className:\"bg-blue-500 text-white px-3 py-1 rounded\",children:\"Play Sequence (Loop)\"})]});}","map":{"version":3,"names":["React","useRef","useState","jsx","_jsx","jsxs","_jsxs","Player","_ref","track","audioRef","segments","setSegments","start","setStart","end","setEnd","repeat","setRepeat","addSegment","playSegments","seg","r","playSegment","s","e","Promise","resolve","audio","current","currentTime","play","interval","setInterval","pause","clearInterval","className","children","name","ref","src","url","controls","type","value","onChange","Number","target","placeholder","onClick","map","i"],"sources":["/Users/tishivak/Documents/web/sound/src/components/Player.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\n\nexport default function Player({ track }) {\n  const audioRef = useRef(null);\n  const [segments, setSegments] = useState([]);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(5);\n  const [repeat, setRepeat] = useState(1);\n\n  const addSegment = () => {\n    setSegments([...segments, { start, end, repeat }]);\n  };\n\n  const playSegments = async () => {\n    for (const seg of segments) {\n      for (let r = 0; r < seg.repeat; r++) {\n        await playSegment(seg.start, seg.end);\n      }\n    }\n    playSegments(); // 🔁 loop whole sequence\n  };\n\n  const playSegment = (s, e) => {\n    return new Promise(resolve => {\n      const audio = audioRef.current;\n      audio.currentTime = s;\n      audio.play();\n\n      const interval = setInterval(() => {\n        if (audio.currentTime >= e) {\n          audio.pause();\n          clearInterval(interval);\n          resolve();\n        }\n      }, 100);\n    });\n  };\n\n  return (\n    <div className=\"mb-6 p-3 border rounded\">\n      <h2 className=\"font-semibold\">{track.name}</h2>\n      <audio ref={audioRef} src={track.url} controls className=\"w-full mb-2\" />\n\n      <div className=\"flex gap-2 mb-2\">\n        <input \n          type=\"number\" \n          value={start} \n          onChange={e => setStart(Number(e.target.value))} \n          placeholder=\"Start (sec)\" \n          className=\"border px-2 py-1 rounded\"\n        />\n        <input \n          type=\"number\" \n          value={end} \n          onChange={e => setEnd(Number(e.target.value))} \n          placeholder=\"End (sec)\" \n          className=\"border px-2 py-1 rounded\"\n        />\n        <input \n          type=\"number\" \n          value={repeat} \n          onChange={e => setRepeat(Number(e.target.value))} \n          placeholder=\"Repeat\" \n          className=\"border px-2 py-1 rounded\"\n        />\n        <button \n          onClick={addSegment}\n          className=\"bg-green-500 text-white px-3 py-1 rounded\"\n        >\n          Add\n        </button>\n      </div>\n\n      <div className=\"mb-2\">\n        {segments.map((seg, i) => (\n          <p key={i}>▶ {seg.start}s → {seg.end}s × {seg.repeat}</p>\n        ))}\n      </div>\n\n      <button \n        onClick={playSegments} \n        className=\"bg-blue-500 text-white px-3 py-1 rounded\"\n      >\n        Play Sequence (Loop)\n      </button>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}